{
  "defaults": {
    "baseUrl": "https://api.example.com",
    "timeout": 30,
    "headers": {
      "Content-Type": "application/json"
    },
    "validations": [
      {
        "httpStatusCode": 200
      }
    ]
  },
  "nodes": [
    {
      "id": "request-oauth-authorization-url",
      "name": "Request OAuth authorization URL",
      "method": "POST",
      "url": "/oauth/authorize",
      "body": {
        "client_id": "your-client-id",
        "redirect_uri": "https://yourapp.com/callback",
        "scope": "read write"
      },
      "launchBrowser": ".authorizationUrl",
      "validations": [
        {
          "jsonpath": ".authorizationUrl",
          "exists": true
        }
      ]
    },
    {
      "id": "exchange-code-for-token-after-user-approves",
      "name": "Exchange code for token (after user approves)",
      "method": "POST",
      "url": "/oauth/token",
      "userPrompts": {
        "authCode": "Enter the authorization code from the browser:"
      },
      "body": {
        "client_id": "your-client-id",
        "client_secret": "your-client-secret",
        "code": "{{ .input.authCode }}",
        "grant_type": "authorization_code"
      },
      "validations": [
        {
          "jsonpath": ".access_token",
          "exists": true
        }
      ]
    },
    {
      "id": "make-authenticated-api-call",
      "name": "Make authenticated API call",
      "method": "GET",
      "url": "/user/profile",
      "headers": {
        "Authorization": "Bearer {{ .responses.exchange-code-for-token-after-user-approves.access_token }}"
      }
    }
  ]
}